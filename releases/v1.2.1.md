# Release v1.2.1 — 2026-02-10

Summary
-------
- CI and test reliability improvements, Playwright smoke test and artifacts, TypeScript fixes, and import handler robustness.

Highlights
----------
- Add Playwright drag smoke test and CI integration (captures screenshot, trace, and logs on failure).
- Fix CI: ensure Playwright browsers are installed from the `dev-playground` package and run package install there.
- Add workspace `pnpm-lock.yaml` and ensure `pnpm -w --frozen-lockfile` works in CI.
- Add `dev-playground` tooling: `run-drag-runner.js`, `run-per-package-tsc.ps1`, CI watch and artifact helpers.
- Resolve TypeScript issues across the workspace:
  - Add ambient typings for `*.module.css` and `@local/design-system`.
  - Fix prop typings in `design-system` components.
- Make `OliveBranch` import handler resilient to non-Next test environments:
  - Guard dynamic import of `next/server` and provide a Response-like fallback.
  - Normalize `NextResponse.json()` returns so tests can call `res.json()` reliably.

Testing
-------
- Ran full workspace tests via `pnpm -w vitest` — all tests pass (20/20).

Notes & Next Steps
------------------
- Consider removing the fallback once the runtime is strictly Next.js in production and prefer mocking `next/server` in tests instead.
- Optional: create a GitHub Release from this tag and attach Playwright artifacts for failed runs if desired.

Files/Areas Changed
-------------------
- `.github/workflows/playwright-ci.yml` — Playwright install & runner tweaks
- `pnpm-lock.yaml` — Added to repo root
- `dev-playground/playwright/*` — Playwright scripts, runner, and helpers
- `dev-playground/src/global.d.ts` — ambient declarations
- `design-system/src/*` — component typing fixes
- `OliveBranch/generated/importCsvHandlerClean.ts` — guarded `next/server` import and normalized responses
